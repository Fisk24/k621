#: import json json

<CommentSubmitter>:
	padding: 20
	size_hint_y: None
	height: 200
	canvas:
		Color:
			rgba: 0.1490, 0.3019, 0.6078, 1
		Line:
			width: 5.0
			rounded_rectangle: self.x, self.y, self.width, self.height, 10
				
	canvas.before:
		Color:
			rgba: 0.1490, 0.3019, 0.6078, 1
		Rectangle:
			pos: self.pos
			size: self.size
	TextInput:
	BoxLayout:
		size_hint_x: None
		width: 200
		Button:
			text: 'Post'

<CommentBodyQuote>:
	font_size: 20
	padding: 10, 10
	size_hint_y: None
	text_size: self.width, None
	halign: "left"
	valign: "top"
	markup: True
	height: self.texture_size[1]
	canvas:
		Color:
			rgba: 0, 0.4, 0.8, 1
		Line:
			width: 5.0
			rounded_rectangle: self.x, self.y+3, self.width, self.height-5, 10
				
	canvas.before:
		Color:
			rgba: 0, 0.4, 0.8, 1
		Rectangle:
			pos: self.pos
			size: self.size

<CommentBodyLine>:
	font_size: 20
	size_hint_y: None
	text_size: self.width, None
	halign: "left"
	valign: "top"
	markup: True
	height: self.texture_size[1]
	
<CommentBody>:
	orientation: 'vertical'
	size_hint_y: None
	height: 0
	canvas.before:
		Color:
			rgba: 1, 0, 0, 0
		Rectangle:
			pos: self.pos
			size: self.size
			
<UserDetailLabel@Label>:
	size_hint_y: None
	text_size: self.size
	height: 17
	halign: "left"
	valign: "top"
	markup: True
	
<AvatarThumbnail@AsyncImage>:
	allow_stretch: True
	size_hint_y: None
	height: 175
	
<Comment>:
	id: commentRoot
	height: commentBody.height + 40
	#comment: {"id":3414729,"created_at":"2017-08-12 15:40","post_id":1301216,"creator":"neo4812","creator_id":101611,"body":"[quote]\"Eclipse_Lunablade\":/user/show/53736 said:\r\nHow to tell if a person is harmless but potentually stupid: Find out if they say YOLO.\r\n[/quote]\r\n\r\n[quote]\"thenucheralphase\":/user/show/165568 said:\r\noh man that face is get the hell off before I kick your ass look.\r\n[/quote]\r\n\r\n[quote]\"funnyman\":/user/show/59046 said:\r\nYOLO\r\n[/quote]\r\n\r\n","score":0}
	#comment: {'id': 3417891, 'created_at': '2017-08-14 07:33', 'post_id': 1302468, 'creator': 'Karma_Kat', 'creator_id': 283055, 'body': "Gender and sexes are the same thing and there are only 2 of them, you don't get to pick. So pretend all you want but fact is fact and you can't argue with basic fucking human biology. Fact doesn't care about who or what you want to be.", 'score': 0}
	comment: {'id': 3422360, 'created_at': '2017-08-16 22:36', 'post_id': 1304728, 'creator': 'Supernova766', 'creator_id': 145649, 'body': '[quote]"Minkzx":/user/show/141501 said:\r\nNot usually into macro/micro, but this pic makes me reconsider that.\r\n[/quote]\r\nI mean, it\'s evalion. The dude knows howto make a sexy dragon.\r\n', 'score': 0}
	canvas:
		Color:
			rgba: 0.1490, 0.3019, 0.6078, 1
		Line:
			width: 5.0
			rounded_rectangle: self.x, self.y, self.width, self.height, 10
				
	canvas.before:
		Color:
			rgba: 0.1490, 0.3019, 0.6078, 1
		Rectangle:
			pos: self.pos
			size: self.size
	
	BoxLayout:
		orientation: 'vertical'
		size_hint_x: None
		width: 200
		BoxLayout:
			id: userInfoLayout
			orientation: 'vertical'
			padding: 5
			size_hint: (None, None)
			width: 200
			height: 60
					
			UserDetailLabel:
				height: 20
				font_size: 20
				valign: 'center'
				text: "[b]{}[/b]".format(commentRoot.comment['creator'])
				
			UserDetailLabel:
				text: "Member"
				
			UserDetailLabel:
				text: commentRoot.comment['created_at']
				
			Widget:
		
		Widget:
			
	BoxLayout:
		orientation: 'vertical'
		padding: 50, 0
		canvas.before:
			Color:
				rgba: 0, 0, 1, 0
			Rectangle:
				pos: self.pos
				size: self.size
					
		CommentBody:
			id: commentBody
			text: commentRoot.comment['body']
			
		BoxLayout:
			id: controls
			size_hint_y: None
			height: 20
			UserDetailLabel:
				text: "Score: {}".format(commentRoot.comment['score'])
				
		Widget:
			#Spacer Widget
			
<CommentManager>:
	padding: 50, 10
	spacing: 20
	orientation: 'vertical'
	#comment: {'id': 3422360, 'created_at': '2017-08-16 22:36', 'post_id': 1304728, 'creator': 'Supernova766', 'creator_id': 145649, 'body': '[quote]"Minkzx":/user/show/141501 said:\r\nNot usually into macro/micro, but this pic makes me reconsider that.\r\n[/quote]\r\nI mean, it\'s evalion. The dude knows howto make a sexy dragon.\r\n', 'score': 0}
	#comment: ['loading']
	canvas.before:
		Color:
			rgba: 0.0039, 0.1804, 0.3373, 1
		Rectangle:
			pos: self.pos
			size: self.size

<DecoderTextInput>:
	
<CommentDevUi>:
	orientation: 'vertical'
	padding: 20
	DecoderTextInput:
		id: decoder
		size_hint_y: None
		height: 30
		target: comments
		text: ""
	Button:
		text: "clear"
		size_hint_y: None
		height: 30
		on_release:
			decoder.text = ""
			comments.comments = []
			comments.clearCommentWidgets()
	CommentSubmitter:
	ScrollView:
		CommentManager:
			id: comments
			origin: root
























	
